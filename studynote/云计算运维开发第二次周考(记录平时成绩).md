## 云计算运维开发第二次周考(记录平时成绩)

-Author: bavdu

-Email: bavduer@163.com

-Github: https://github.com/bavdu

---



#### 一阶段考试题(shell)

---

1. 在三月份每7天执行一次系统健康检查, 健康检查时运行脚本checkHealth.sh, 请写出具体步骤及命令

2. sql语句中, 查询框架有哪些？(至少写两种); 删除数据的框架是？插入数据的框架是？修改数据的框架是？

3. 在命令行中删除file.txt文件中所有带`qfcloud`的行(正则); 

   截取本机的IP地址; 

   查找ipaddr.txt中所有符合规范的IP地址(正则)

4. 请写出这些符号的意义: `$?` `$#` `$0` `$$`

5. 请统计`access_log`日志中访问量前十的IP地址, 要求显示的信息为`IP地址  -  访问次数`



####二阶段考试题(python)

---

1. 请统计access_log中访问量前十的IP地址,并把统计好的数据格式化,存储到文件pv.json中

2. 请统计access_log中所有的状态码(200, 404, 502, 503)各自出现的数量,并将数据格式化,存储到scode.json中

3. 请统计access_log中访问最大的资源,前十名,并把统计好的数据格式化,存储到文件ipaddr.json中

   > 185.173.224.24  [30/Jun/2019:11:48:52 +0800] "GET /wordpress/fest.xml HTTP/1.1" 404

   ```python
   "GET /wordpress/wp-includes/wlwmanifest.xml HTTP/1.1" - (“请求方法 资源 所用协议版本”)
   ```
   
4. `ips = {'192.168.161.10': 13, '39.100.110.135': 8, '1.1.1.1': 11, '8.8.8.8': 5}`

   将上述字典根据值的大小进行排序(从大到小)

5. 请写一个函数分析日志, 返回值为PV量和UV量(文件access_log, 日志格式正常)

6. 请使用高阶函数过滤出access_log中访问量大于100的IP地址(可直接利用第一题中的结果数据)

7. 请使用闭包来实现一个可以从任意初始值开始计数的计步器

   ```python
   # 效果:
   ----------------------------------------
   # Program:
   step = stepCount(10)		# 从第10步开始计数
   print(step())
   print(step())
   print(step())
   
   ----------------------------------------
   # Out:
   开始记步,初始值: 10
   11
   12
   13
   ```

8. 请描述`filter()`、`reduce()`、`map()`三者的作用和原理