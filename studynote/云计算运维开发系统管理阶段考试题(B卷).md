## 云计算运维开发系统管理阶段考试题(B卷)

- 不得参阅任何与考试有关的笔记或内容
- 不得交头接耳、相互传递纸条等违规行为
- 不得询问讲师一切与考试有关的内容

------

1. 请计算cpu占用时间百分比; 内存占用了多少M; 磁盘占用百分比;

   ```shell
   us=$(vmstat|awk 'NR==3{ print $13 }')
   sy=$(vmstat|awk 'NR==3{ print $14 }')
   rate=$((${us}+${sy}))
   
   USE=$(free -mw | awk 'BEGIN{ FS=" " }NR==2{ print $3 }')
   CACHE=$(free -mw | awk 'BEGIN{ FS=" " }NR==2{ print $7 }')
   use=$((${USE}+${CACHE})
   
   useRate=$(df -Th | awk 'BEGIN{ FS=" " }NR==2{ print $6 }')
   ```

   

2. 请统计`access_log`日志中访问量前十的IP地址, 要求显示的信息为`IP地址  -  访问次数`

3. 如何让Linux系统的历史记录显示具体时间(精确到秒); 怎么样同步系统的时间为互联网时间

4. 请简述MySQL主从复制的原理, 并画出其原理图

5. 推送代码到github时, 分别要执行那几个步骤？命令是什么？

6. 在三月份每7天执行一次系统健康检查, 健康检查时运行脚本checkHealth.sh, 请写出具体步骤及命令

7. 匹配符合IP规范的正则表达式为？匹配正确的手机号的正则表达式？匹配日期的正则表达式为？

   ```shell
   192.555.249.340									12865789091							2019-34-12
   192.168.161.161									13843838438							2018-12-10
   192.178.156.134									14513818901							1994-09-08
   1.1.1.1													15897330681							1992-35-12
   8.8.8.8													15913434567							1906-12-45
   114.114.114											23789012824							1988-02-02
   ```

8. 请写出awk使用if判断时的框架结构(文件名用filename代替);awk使用for循环时的框架结构;

   ```shell
   awk 'BEGIN{}{ if(){} }END{ 或if(){} }' filename
   awk 'BEGIN{}{ for(){} }END{ 或if(){} }' filename
   ```

   

9. 请写出sed删除文件中所有关于2018年12月3日的信息;**(log_format: [18:30:32] - 2018/12/3 - syntax error.)**

   ```shell
   sed -ri "/[^.]*2018\/12\/3[^.]*/d" filename
   ```

   

10. 产生密钥对的命令为?

   会产生哪些文件？哪个是私钥？ 

   进行ssh认证的命令为？(对远程的123.123.123.123机器进行认证)

   ```shell
   ssh-keygen
   id_rsa id_rsa.pub
   ssh-copy-id username@123.123.123.123
   ```

   